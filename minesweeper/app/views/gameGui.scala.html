@(controller: de.htwg.se.minesweeper.controller.controller.Controller)

@import helper._
@import de.htwg.se.minesweeper.model.Symbols

@main("Minesweeper GUI") {
    <h1>Minesweeper Game</h1>

    <p>
        <strong>Difficulty:</strong>
        <a href='@routes.HomeController.setDifficulty("E")'>Easy</a> |
        <a href='@routes.HomeController.setDifficulty("M")'>Medium</a> |
        <a href='@routes.HomeController.setDifficulty("H")'>Hard</a>
    </p>

    <table border="1" cellpadding="5" cellspacing="0">
        @for(y <- 0 until controller.field.size) {
            <tr>
                @for(x <- 0 until controller.field.size) {
                    <td style="width:30px;height:30px;text-align:center;">
                        @{
                            val cellValue = controller.field.cell(x, y)
                            cellValue match {
                                case Symbols.Covered => Html(
                                    s"""<a href='@routes.HomeController.uncoverField(@x, @y)'>[ ]</a>
                                    <a href='@routes.HomeController.flagField(@x, @y)'>ðŸš©</a>"""
                                )
                                case Symbols.Flag => Html("ðŸš©")
                                case Symbols.Empty => Html("&nbsp;")
                                case Symbols.Bomb => Html("ðŸ’£")
                                case number => Html(number.toString)
                            }
                        }
                    </td>
                }
            </tr>
        }
    </table>

    <p>
        <a href='@routes.HomeController.undo()'>Undo</a> |
        <a href='@routes.HomeController.restart()'>Restart</a>
    </p>

    @if(controller.game.gameState == de.htwg.se.minesweeper.model.Status.Won) {
        <p><strong>Congratulations, you won!</strong></p>
    } else if(controller.game.gameState == de.htwg.se.minesweeper.model.Status.Lost) {
        <p><strong>Sorry, you lost!</strong></p>
    }
}
